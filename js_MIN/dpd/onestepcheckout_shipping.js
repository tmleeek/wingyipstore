DPD.Shipping.addMethods({initialize:function(e,i){"DPD_window_content"==e?(this.iframe=window.parent.document.getElementById("DPD_window_content"),innerDoc=this.iframe.contentDocument||this.iframe.contentWindow.document,this.container=innerDoc.getElementById("parcelshop")):this.container=$$(e)[0],this.config=i,this.showParcelsLinkClick=this.displayParcelsInline.bind(this),this.saveParcelShopClick=this.saveParcelShop.bind(this),this.invalidateParcelLinkClick=this.invalidateParcel.bind(this),this.saveShipping=this.updateProgressBlock.bind(this),this.showExtraInfoHover=this.showExtraInfo.bind(this),this.container.down("#map_canvas")&&this.initGmaps(),this.container.down(".parcelshoplogo")&&(this.container.down("#s_method_dpdparcelshops_dpdparcelshops").checked=!0,this.setParcelshopImage()),this.bindEvents()},saveParcelShop:function(e){if("parcelshop"==this.container.id){var i=e.target.id;setTimeout(function(){parent.Windows.close("DPD_window",e)},1),this.container=window.parent.document.getElementsByClassName("onestepcheckout-shipping-method-block")[0]}else var i=e.target.id;i||(i=e.target.parentNode.id),this.container.down("#s_method_dpdparcelshops_dpdparcelshops").checked=!0;var s=this.config.saveParcelUrl,n=this.config[i],t=(this.config.loaderimage,this.container.down("#parcelshop"));t.update('<div class="dpdloaderwrapper" style="margin-bottom:35px;"><span class="dpdloader"></span><span class="message"></span></div><input type="hidden" class="DPD-confirmed" value="0"/>'),new parent.Ajax.Request(s,{method:"POST",asynchronous:!1,evalScripts:!0,parameters:n,onSuccess:function(e){this.container.down("#dpd").update(e.responseText);var i=this.container.down("#custom-shipping-amount").value,s=this.container.down('label[for="s_method_dpdparcelshops_dpdparcelshops"] span'),n=s.innerHTML;s.update(i),this.container.down("#s_method_dpdparcelshops_dpdparcelshops").click(),i.substring(1)!=n.substring(1)&&(s.addClassName("price-changed"),parent.setTimeout(function(){s.removeClassName("price-changed")}.bind(this),2e3))}.bind(this)})}});