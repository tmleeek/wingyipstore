GiftOptionsTooltip=Class.create(),GiftOptionsTooltip.prototype={_tooltipLines:[],_tooltipWindow:null,_tooltipWindowContent:null,_targetLinks:[],_eventMouseOver:null,_eventMouseOut:null,_styleOptions:null,_tooltipContentLoaderFunction:null,initialize:function(){var t=Object.extend({delta_x:30,delta_y:0,zindex:1e3});this._styleOptions=t,this._eventMouseOver=this.showTooltip.bindAsEventListener(this),this._eventMouseOut=this.hideTooltip.bindAsEventListener(this)},setTooltipWindow:function(t,o){return $(t)&&$(o)?(this._tooltipWindow=$(t),this._tooltipWindowContent=$(o),this.hideTooltip(),!0):!1},addTargetLink:function(t,o){return $(t)?(this._targetLinks[t]=[],this._targetLinks[t].object=$(t),this._targetLinks[t].itemId=o,this._registerEvents(this._targetLinks[t].object),!0):!1},destroy:function(){for(var t in this._targetLinks)Event.stopObserving(this._targetLinks[t].object,"mouseover",this._eventMouseOver),Event.stopObserving(this._targetLinks[t].object,"mouseout",this._eventMouseOut)},_registerEvents:function(t){Event.observe(t,"mouseover",this._eventMouseOver),Event.observe(t,"mouseout",this._eventMouseOut)},_moveTooltip:function(t){Event.stop(t);var o=Event.pointerX(t),e=Event.pointerY(t);this.setStyles(o,e)},showTooltip:function(t){if(Event.stop(t),this._tooltipWindow){var o=Event.element(t),e=this._targetLinks[o.id].itemId,i="";if(Object.isFunction(this._tooltipContentLoaderFunction)&&(i=this._tooltipContentLoaderFunction(e)),""!=i)return this._updateTooltipWindowContent(i),this._moveTooltip(t),new Element.show(this._tooltipWindow),!0}return!1},setStyles:function(t,o){Element.setStyle(this._tooltipWindow,{position:"absolute",top:o+this._styleOptions.delta_y+"px",left:t+this._styleOptions.delta_x+"px",zindex:this._styleOptions.zindex})},hideTooltip:function(){this._tooltipWindow&&new Element.hide(this._tooltipWindow)},setTooltipContentLoaderFunction:function(t){this._tooltipContentLoaderFunction=t},_updateTooltipWindowContent:function(t){this._tooltipWindowContent.update(t)}},giftOptionsTooltip=new GiftOptionsTooltip;