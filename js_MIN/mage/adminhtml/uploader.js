function MultiSelector(e,t,n,l,i,o){this.list_target=e,this.field_name=t,this.count=0,this.id=0,this.max=n?n:-1,this.new_element_html=l,this.delete_text=i,this.new_file_input=o,this.addElement=function(e){"INPUT"==e.tagName&&"file"==e.type?(this.id++,e.name=this.field_name+"[]",e.multi_selector=this,e.onchange=function(){var e=document.createElement("input");e.type="file",this.parentNode.insertBefore(e,this),this.multi_selector.addElement(e),this.multi_selector.addListRow(this),this.style.position="absolute",this.style.left="-1000px"},-1!=this.max&&this.count>=this.max&&(e.disabled=!0),this.count++,this.current_element=e):alert("Error: not a file input element")},this.addListRow=function(){var e=document.createElement("input");e.type="text",e.name="general[position_new][]",e.size="3",e.value="0";var t=document.createElement("input");t.type="checkbox",t.value="Delete";var n=document.createElement("span");n.innerHTML=this.delete_text,table=this.list_target,noOfRows=table.rows.length,noOfCols=table.rows[noOfRows-2].cells.length;for(var l=table.insertRow(noOfRows-1),i=0;noOfCols>i;i++)newCell=l.insertCell(i),newCell.align="center",newCell.valign="middle",3==i?newCell.appendChild(e):4==i?newCell.appendChild(t):newCell.innerHTML=this.new_file_input.replace(/%id%/g,this.id).replace(/%j%/g,i);t.onclick=function(){return this.parentNode.element.parentNode.removeChild(this.parentNode.element),this.parentNode.parentNode.removeChild(this.parentNode),this.parentNode.element.multi_selector.count--,this.parentNode.element.multi_selector.current_element.disabled=!1,!1}},this.insRowLast=function(e){noOfRows=e.rows.length,noOfCols=e.rows[noOfRows-1].cells.length;for(var t=e.insertRow(noOfRows),n=0;noOfCols>n;n++)newCell=t.insertCell(n),newCell.innerHTML="NEW CELL"+n},this.deleteRow=function(e,t){e.deleteRow(t)},this.deleteRow=function(e){noOfRows=e.rows.length,e.deleteRow(noOfRows-1)}}