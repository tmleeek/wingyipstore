varienEvents=Class.create(),varienEvents.prototype={initialize:function(){this.arrEvents={},this.eventPrefix=""},attachEventHandler:function(e,t){if("undefined"!=typeof t&&null!=t){e+=this.eventPrefix,null==this.arrEvents[e]&&(this.arrEvents[e]=[]);var n=arguments.length>2?arguments[2]:!1,r={method:t,asynch:n};this.arrEvents[e].push(r)}},removeEventHandler:function(e,t){e+=this.eventPrefix,null!=this.arrEvents[e]&&(this.arrEvents[e]=this.arrEvents[e].reject(function(e){return e.method==t}))},clearEventHandlers:function(e){e+=this.eventPrefix,this.arrEvents[e]=null},clearAllEventHandlers:function(){this.arrEvents={}},fireEvent:function(e){var t,n=e+this.eventPrefix,r=[];if(null!=this.arrEvents[n])for(var s=this.arrEvents[n].length,i=0;s>i;i++)try{if(arguments.length>1)if(this.arrEvents[n][i].asynch){var a=arguments[1],v=this.arrEvents[n][i].method.bind(this);setTimeout(function(){v(a)}.bind(this),10)}else t=this.arrEvents[n][i].method(arguments[1]);else if(this.arrEvents[n][i].asynch){var h=this.arrEvents[n][i].method;setTimeout(h,1)}else this.arrEvents&&this.arrEvents[n]&&this.arrEvents[n][i]&&this.arrEvents[n][i].method&&(t=this.arrEvents[n][i].method());r.push(t)}catch(E){alert(this.id?"error: error in "+this.id+".fireEvent():\n\nevent name: "+e+"\n\nerror message: "+E.message:"error: error in [unknown object].fireEvent():\n\nevent name: "+e+"\n\nerror message: "+E.message)}return r}},varienGlobalEvents=new varienEvents;