var varienAccordion=new Class.create;varienAccordion.prototype={initialize:function(e,i){this.containerId=e,this.activeOnlyOne=i||!1,this.container=$(this.containerId),this.items=$$("#"+this.containerId+" dt"),this.loader=new varienLoader(!0);var t=$$("#"+this.containerId+" dt a");for(var n in t)t[n].href&&(Event.observe(t[n],"click",this.clickItem.bind(this)),this.items[n].dd=this.items[n].next("dd"),this.items[n].link=t[n]);this.initFromCookie()},initFromCookie:function(){var e,i;this.activeOnlyOne&&null!==(e=Cookie.read(this.cookiePrefix()+"active-item"))?(this.hideAllItems(),this.showItem(this.getItemById(e))):this.activeOnlyOne||this.items.each(function(e){null!==(i=Cookie.read(this.cookiePrefix()+e.id))&&(0==i?this.hideItem(e):this.showItem(e))}.bind(this))},cookiePrefix:function(){return"accordion-"+this.containerId+"-"},getItemById:function(e){var i=null;return this.items.each(function(t){if(t.id==e)throw i=t,$break}),i},clickItem:function(e){var i=Event.findElement(e,"dt");this.activeOnlyOne?(this.hideAllItems(),this.showItem(i),Cookie.write(this.cookiePrefix()+"active-item",i.id,2592e3)):this.isItemVisible(i)?(this.hideItem(i),Cookie.write(this.cookiePrefix()+i.id,0,2592e3)):(this.showItem(i),Cookie.write(this.cookiePrefix()+i.id,1,2592e3)),Event.stop(e)},showItem:function(e){e&&e.link&&(e.link.href&&this.loadContent(e),Element.addClassName(e,"open"),Element.addClassName(e.dd,"open"))},hideItem:function(e){Element.removeClassName(e,"open"),Element.removeClassName(e.dd,"open")},isItemVisible:function(e){return Element.hasClassName(e,"open")},loadContent:function(e){return e.link.href.indexOf("#")!=e.link.href.length-1?Element.hasClassName(e.link,"ajax")?(this.loadingItem=e,void this.loader.load(e.link.href,{updaterId:this.loadingItem.dd.id},this.setItemContent.bind(this))):void(location.href=e.link.href):void 0},setItemContent:function(e){e.isJSON||(this.loadingItem.dd.innerHTML=e)},hideAllItems:function(){for(var e in this.items)this.items[e].id&&(Element.removeClassName(this.items[e],"open"),Element.removeClassName(this.items[e].dd,"open"))}};