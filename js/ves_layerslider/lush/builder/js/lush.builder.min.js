
var localStorage = localStorage||{};

jQuery(function ($) {

    ! function (t, i, n) {
        function e(i, n, e, o) {
            a = this, this.element = i, this.$element = t(i), this.options = {}, n && (this.options.data = n, this.options.controller = e || {}, this.options.callback = o, this.binderid = this.$element.data("binderid") || parseInt(1e4 * Math.random() + 1), this.namespace = "." + this.binderid + ".binder", this.$element.data("binderid", this.binderid), this.init())
        }
        var a, o = "binder";
        e.prototype = {
            init: function () {
                this.fieldArray = this.$element.find("[data-bind]:input"), this.fieldArray.length && this.attach()
            },
            attach: function (i) {
                var e = this.options.data,
                    o = t(n).off(this.namespace);
                t.each(this.fieldArray, function (n) {
                    var r = t(a.fieldArray[n]),
                        s = r.attr("type");
                    if (r.data("bind")) {
                        var c = r.data("bind");
                        if (trigger = r.data("trigger"), "text" == s || "number" == s || r.is("textarea")) r.val(e[c]), i || o.on((trigger || "keyup") + a.namespace, function (i) {
                            var n = t(i.target);
                            n.is(r) && (e[c] = n.val(), "number" == s && (e[c] = parseInt(e[c])), a.options.controller[c] && a.options.controller[c](e[c]), a.options.callback && a.options.callback())
                        });
                        else if ("checkbox" == s) e[c] === !0 && r.prop("checked", !0), i || o.on((trigger || "change") + a.namespace, function (i) {
                            var n = t(i.target);
                            n.is(r) && (e[c] = n.is(":checked") ? !0 : !1, a.options.controller[c] && a.options.controller[c](e[c]), a.options.callback && a.options.callback())
                        });
                        else if ("radio" == s) {
                            var l = t('[name="' + r.attr("name") + '"]:visible');
                            l.val([e[c]]), i || o.on((trigger || "change") + a.namespace, function (i) {
                                var n = t(i.target);
                                n.is(r) && (e[c] = n.val(), a.options.controller[c] && a.options.controller[c](e[c]), a.options.callback && a.options.callback())
                            })
                        } else(r.is("select") || "hidden" == s) && (r.val(e[c]), i || o.on((trigger || "change") + a.namespace, function (i) {
                            var n = t(i.target);
                            n.is(r) && (e[c] = n.val(), a.options.controller[c] && a.options.controller[c](e[c]), a.options.callback && a.options.callback())
                        }))
                    }
                })
            }
        }, t.fn[o] = function (t, i, n) {
            return this.each(function () {
                new e(this, t, i, n)
            })
        }
    }(jQuery, window, document);

    function savedata() {
        /* Comment by Panda
        if (!localStorageSupport()) return alert("No local storage support detected. Your slider will not be saved!"), !1;
        try {
            localStorage.setItem("lush", getdata(!0))
        } catch (t) {
            return alert("There was an error saving your slider. Please, see documentation before continue. [" + t.name + "]"), !1
        }*/
    }

    function saveslider() {
        return getdata(!0);
    }

    function getdata(t) {
        var e = {};
        return getAllSlides().each(function () {
            var t = $(this);
            name = this.id, e[name] = {}, e[name].slide = t.data("slideData"), getCurrentSlideChilds(t).each(function (t) {
                var a = $(this);
                e[name][t] = {}, a.copydata(["itemData", "currentClass", "id", "originalTitle"], e[name][t])
            })
        }), e.ss = sliderSize, e.fw = isFullwidth(), e.bg = sliderBackground, e.fs = isFlexsliderMode() ? flexSlider : !1, t ? JSON.stringify(e) : e
    }

    function restoredata() {

        if($("#slider_json_data").length > 0 && $("#slider_json_data").val()) {
            var t, e = $("#slider_json_data").val();
            if (e) return t = JSON.parse(e), t && restoreslide(t), !0
        } else {
            if (!localStorageSupport()) return !1;
            var t, e = localStorage.getItem("lush");
            if (e) return t = JSON.parse(e), t && restoreslide(t), !0 
        }
       
    }

    function restoreslide(t) {
        var e, a, r = 0;
        for (var i in t)
            if (!/ss|fw|bg|fs/.test(i)) {
                e = t[i].slide, r = addSlide(e), a = "#slide-container-" + r, e || (e = $(a).data("slideData"));
                for (var s in t[i])
                    if ("slide" != s) {
                        itemData = t[i][s].itemData, itemData.id = gItemIdCounter++;
                        var o = ItemCreate[itemData.type](itemData);
                        isEmpty(itemData.style) || Controller.style(itemData.style, o)
                    }
            }
        t.ss && ($("#slider-width").val(t.ss.width), $("#slider-height").val(t.ss.height), setSliderSize()), t.fw && toggleFullwidth(!0), t.bg && "" != t.bg.src && ($.extend(sliderBackground, t.bg), setSliderBackground(t.bg.src, t.bg.src64)), t.fs && setFlexsliderMode(t.fs), listElements()
        $.extend(sliderBackground, t.bg);
        $("#skin-class").val(t.bg.skin);
        $("#shadow-class").val(t.bg.shadow);
    }

    function exportdata() {
        var t = getdata(!0);
        $("#export-target").text(t)
    }

    function importdata() {
        var t = $("#import-target");
        importData = t.val(), $("import-status").text("Importing..");
        try {
            var e = JSON.parse(importData);
            restoreslide(e), $("#import-status").text("Success!")
        } catch (a) {
            $("#import-status").text("Error!")
        }
    }

    function localStorageSupport() {
        try {
            return "localStorage" in window && null !== window.localStorage
        } catch (t) {
            return !1
        }
    }
    $.fn.copydata = function (t, e) {
        return this.each(function () {
            for (var a = $(this), r = 0, i = t.length; i > r; r++) e[t[r]] = a.data(t[r])
        })
    }, $.fn.pastedata = function (t, e) {
        return this.each(function () {
            for (var a = $(this), r = 0, i = t.length; i > r; r++) a.data(t[r], e[t[r]])
        })
    };

    function getVideoPreview(e, t, i) {
        switch (t) {
        case "youtube":
            var a = e;
            $.getJSON("http://gdata.youtube.com/feeds/api/videos/" + a + "?v=2&alt=json&callback=?", function () {
                i(e, "http://img.youtube.com/vi/" + a + "/" + "maxresdefault.jpg")
            });
            break;
        case "vimeo":
            var n = e;
            $.getJSON("http://vimeo.com/api/v2/video/" + n + ".json?callback=?", function (e) {
                i(n, e[0].thumbnail_large)
            })
        }
    }

    function generateMarkup(e) {
        var t = "",
            i = gImageLocation.val(),
            a = isFlexsliderMode();
        return a ? (t += '<div class="flexslider">', t += '<ul class="slides">') : (t += '<div class="lush-slider ' + $("#skin-class").val() + " " + $("#shadow-class").val() + '"', t += ' style="', "" !== sliderBackground.src64 && "" !== sliderBackground.src && (t += "background-image: url('" + (e ? sliderBackground.src64 : "" === i ? sliderBackground.src : i + "/" + sliderBackground.src) + "'); ", t += "background-size: " + sliderBackground.size + ";", t += "background-position: " + sliderBackground.position + ";", t += "background-repeat: " + sliderBackground.repeat + ";"), t += '" >'), getAllSlides().each(function () {
            var i = $(this),
                n = i.data("slideData"),
                o = getCurrentSlideChilds(i);
            0 != o.length && (t += (a ? "<li" : "<div") + ' class="lush" ', n.globals && (t += 'data-slide-in="at ' + n. in .at + " plus " + n. in .plus + " from " + n. in .from + " use " + n. in .use + " during " + n. in .during + '" ', t += 'data-slide-out="at ' + n.out.at + " plus " + n.out.plus + " to " + n.out.to + " use " + n.out.use + " during " + n.out.during + (n.out.force ? " force" : "") + '" '), n.deadtime > 0 && (t += 'data-deadtime="' + n.deadtime + '" '), t += ">", o.each(function () {
                var i = $(this).data("itemData");
                t += Generator[i.type](n.globals, i, e)
            }), t += a ? "</li>" : "</div>")
        }), t += a ? "</ul></div>" : "</div>"
    }

    function generateJS() {
        var e = (getCurrentSlide(), "");
        return $slide = getAllSlides().eq(0), endline = "\n", e += "$(document).ready(function(){" + endline, e += isFlexsliderMode() ? "  $('.flexslider').lush({" + endline : "  $('.lush-slider').lush({" + endline, e += "     baseWidth: " + sliderSize.width + endline, e += "   , baseHeight: " + sliderSize.height + endline, isManualMode() && (e += "   , manual: true" + endline), isCarouselMode() && (e += "   , slider: {" + endline, e += "        carousel: true" + endline, e += "    }" + endline), isFlexsliderMode() && (e += "   , flexslider: {" + endline, e += "          easing: '" + flexSlider.easing + "'" + endline, e += "        , slideshow: " + !1 + endline, e += "        , useCSS: " + !1 + endline, e += "        , pauseOnHover: " + flexSlider.pauseonhover + endline, e += "        , direction: '" + flexSlider.direction + "'" + endline, e += "        , animation: '" + flexSlider.animation + "'" + endline, e += "        , animationSpeed: " + parseInt(flexSlider.speed) + endline, e += "    }" + endline), e += "  })" + endline, e += "})"
    }

    function addInteraction() {
        doDraggable(this), doResizable(this)
    }

    function doDraggable(e) {
        var t = parseInt(gStuffGridSize.val(), 0),
            i = {};
        i.snap = gStuffSnapItem[0].checked, i.grid = gStuffSnapGrid[0].checked ? [t, t] : !1, i.stop = i.grid ? function (e, i) {
            $(this).css({
                top: i.position.top - i.position.top % t,
                left: i.position.left - i.position.left % t
            }), updatePos.call(this)
        } : updatePos, i.axis = !1, gStuffDragX[0].checked && (i.axis = "x"), gStuffDragY[0].checked && (i.axis = "y"), i.drag = function (e, t) {
            Controller.clip(t.helper.data("itemData").clip, this)
        }, toggleGrid(t), e.draggable(i)
    }

    function doResizable(e) {
        e.hasClass("ui-resizable") && e.data("ui-resizable") && e.resizable("destroy"), e.resizable({
            containment: getCurrentSlide(),
            minWidth: 30,
            minHeight: 30,
            start: function (e, t) {
                t.element.addClass("hilight")
            },
            stop: function (e, t) {
                var i = t.element.removeClass("hilight").data("itemData");
                i.width = t.element.css("width"), i.height = t.element.css("height")
            }
        })
    }

    function toggleFullwidth(e) {
        var t, i = $(".container.slider"),
            a = $("#slider-width");
        if (e === !0) {
            if ($("#do-fw").hasClass("active")) return;
            $("#do-fw").addClass("active")
        }
        i.hasClass("fw") ? t = a.data("oldWidth") == parseInt(a.val()) ? 1140 : a.data("oldWidth") : (a.data("oldWidth", a.val()), t = $(window).width()), a.val(t), setSliderSize(), i.toggleClass("fw")
        return false;
    }

    function toggleGrid(e) {
        var t = "repeating-linear-gradient(0deg, rgba(0,0,0,0.3), rgba(0,0,0,0.3) 1px, transparent 1px, transparent {size}px),repeating-linear-gradient(-90deg, rgba(0,0,0,0.3), rgba(0,0,0,0.3) 1px, transparent 1px, transparent {size}px)",
            i = getAllSlides();
        $("#show-grid").is(":checked") ? i.css({
            "background-image": t.replace(/{size}/g, e),
            "background-size": e + "px " + e + "px",
            "background-repeat": "",
            "background-position": ""
        }) : setSliderBackground()
    }

    function setSliderBackground(e, t) {
        var i = getAllSlides();
        t && (sliderBackground.src = e, sliderBackground.src64 = t), e === !1 && (sliderBackground = {
            src: "",
            src64: ""
        }), sliderBackground.skin = $("#skin-class").val() , sliderBackground.shadow =  $("#shadow-class").val(), sliderBackground.size = "" == $.trim(sliderBackground.size) ? "100% auto" : sliderBackground.size, sliderBackground.position = "" == $.trim(sliderBackground.position) ? "0 0" : sliderBackground.position, sliderBackground.repeat = "" == $.trim(sliderBackground.repeat) ? "no-repeat" : sliderBackground.repeat, i.css({
            "background-image": "url(" + sliderBackground.src64 + ")",
            "background-size": sliderBackground.size,
            "background-position": sliderBackground.position,
            "background-repeat": sliderBackground.repeat
        })

    }

    function updatePos() {
        var e = $(this);
        $.extend(e.data("itemData"), {
            top: e.css("top"),
            left: e.css("left")
        })
    }

    function loadOptions(e, t) {
        $.each(t, function (t, i) {
            $("<option/>", {
                values: i
            }).text(i).appendTo(e)
        })
    }

    function classList(e, t, i) {
        for (var a = document.getElementById(e), n = a.sheet.cssRules, o = [], r = 0; r < n.length; r++) t && t.test(n[r].selectorText) || i && !i.test(n[r].selectorText) || o.push(n[r].selectorText.replace(".", ""));
        return o
    }

    function isEmpty(e) {
        return "undefined" == typeof e || null === e || "" === e ? !0 : "number" == typeof e && isNaN(e) ? !0 : e instanceof Date && isNaN(Number(e)) ? !0 : !1
    }

    function addSlide(e) {
        var t, i = ++gSlideCounter,
            a = e || newSlide();
        return t = $("<li/>").append('<a href="#slide-' + i + '">' + "Slide-" + i + "</a>" + ' <div class="popable"' + 'data-id="#pover-slide"' + 'data-placement="bottom"' + 'data-toggle="popover"' + 'data-original-title="Slide Settings"><em class="icon-angle-down"></em> </div>').appendTo(gSlideTabs), $('<div id="slide-container-' + i + '"/>').appendTo(gSlideContent).wrap('<div class="tab-pane" id="slide-' + i + '"/>').data("slideData", a), setSliderSize(), $("a", t).tab("show"), setSliderBackground(), listElements(), i
    }

    function cloneSlide() {
        var e, t = getCurrentSlide(),
            i = $.extend({}, t.data("slideData"));
        e = addSlide(i), getCurrentSlideChilds(t).each(function () {
            var e = $(this),
                t = $.extend(!0, {}, e.data("itemData"), {
                    id: getNewItemId()
                });
            item = ItemCreate[t.type](t), Controller.style(t.style, item)
        }), listElements()
    }

    function setSliderSize() {
        var e = parseInt($("#slider-width").val()),
            t = parseInt($("#slider-height").val());
        sliderSize.width = e || 1140, sliderSize.height = t || 450, getAllSlides().each(function () {
            var e = $(this);
            e.width(sliderSize.width).height(sliderSize.height), e.find(".lush-element").each(function () {
                var e = $(this);
                Controller.clip(e.data("itemData").clip, e)
            })
        })
    }

    function getEditingElement() {
        return $(".lush-element.poped")
    }

    function getCurrentSlide() {
        return $(".tab-content > .active > div")
    }

    function getCurrentSlideChilds(e) {
        return (e ? e : getCurrentSlide()).children(".lush-element")
    }

    function getAllSlides() {
        return $("[id*=slide-container-]")
    }

    function isFullwidth() {
        return $("#do-fw").is(".active")
    }

    function isFlexsliderMode() {
        return false;
        /*return gModeFlexslider.is(":checked")*/
    }

    function setFlexsliderMode(e) {
        $.extend(flexSlider, e), gModeFlexslider.addClass("active")
    }

    function isCarouselMode() {
        return gModeCarousel.is(":checked")
    }

    function isManualMode() {
        return gModeManual.is(":checked")
    }

    function lushDemoPreview(e, t, i) {
        var a, n, o, r = $("#effect-preview-block");
        return i && r.length ? (r.remove(), void 0) : ("" !== e && ("undefined" != typeof createEffect && $("#custom-css").text(createEffect(e)), n = ' data-slide-in="at 100 from ' + e + '"', o = ' data-slide-out="at 1000 to ' + e + '"', a = '<div id="effect-preview-block"><div class="lush-slider no-skin no-shadow"><div class="lush"><div id="demo-effect-block" ' + n + o + ">Demo effect</div>" + "</div></div></div>", r = $(a).appendTo(document.body), t && r.css(t), r.show(), $(".lush-slider").lush({
            baseWidth: 300,
            baseHeight: 120,
            slider: {
                navigation: !1,
                responsive: !1,
                shadow: !1
            }
        })), void 0)
    }

    function getNewItemId() {
        return gItemIdCounter++
    }

    function newItem(e) {
        return {
            id: getNewItemId(),
            type: e,
            top: 0,
            left: 0,
            bottom: 0,
            right: 0,
            width: "auto",
            height: "auto",
            src: "nopicture.jpg",
            src64: "data:image/jpeg;base64,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",
            ignore: !1,
            content: "Text Element",
            tag: "h1",
            style: "",
            clase: "",
            href: "#",
            target: "_top",
            opacity: 1,
            videosrc: "data:image/jpeg;base64,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",
            videotype: "youtube",
            videoid: "",
            "in": {
                at: 500,
                from: "left",
                use: "swing",
                during: 500,
                plus: 0,
                override: !1
            },
            out: {
                at: 500,
                to: "right",
                use: "swing",
                during: 500,
                plus: 0,
                force: !1,
                override: !1
            }
        }
    }

    function newSlide() {
        return {
            deadtime: 0,
            globals: !1,
            "in": {
                at: 500,
                from: "left",
                use: "swing",
                during: 1e3,
                plus: 0
            },
            out: {
                at: 500,
                to: "right",
                use: "swing",
                during: 1e3,
                plus: 0,
                force: !1
            }
        }
    }

    function listElements() {
        var e = (getCurrentSlide(), $());
        getCurrentSlideChilds().each(function () {
            var t = $(this),
                i = t.data("itemData");
            e = e.add($('<div class="toe-item-timeline"><div class="toe-item-action drag-handler" title="Drag"></div><div class="toe-item-action action-visibility' + (t.hasClass("invisible") ? " invisible" : "") + '" title="Show / Hide"><em class="icon-eye-open"></em></div>' + '<div class="toe-item-type' + (t.hasClass("invisible") ? " invisible" : "") + '">' + i.type + "</div>" + '<div class="toe-item-action action-clone" title="Clone"><em class="icon-copy"></em></div>' + '<div class="toe-item-action action-remove" title="Remove"><em class="icon-remove"></em></div>' + '<div class="timeline-wrapper">' + '<div class="timeline-slider"></div>' + "</div>" + "</div>")), e.eq(-1).data("item", t)
        }), gToeItem.html("").append(e), gToeItem.sortable({
            items: ".toe-item-timeline",
            placeholder: "drag-highlight",
            tolerance: "pointer",
            handle: ".drag-handler",
            start: function () {},
            update: function (e, t) {
                var i = t.item.data("item"),
                    a = t.item.index();
                i.insertAt(a, getCurrentSlide())
            }
        }).find(".timeline-slider").each(function () {
            var e = $(this),
                t = e.parent().parent().data("item"),
                i = t.data("itemData"),
                a = parseInt(i. in .at / 10),
                n = a + parseInt((i.out.at + i. in .during + i.out.during) / 10);
            e.on("mousedown touchstart", function (e) {
                activateTimeline($(this).parent()), $(e.target).is(".ui-slider-handle, .ui-slider-range") || e.stopImmediatePropagation()
            }).dragslider({
                range: !0,
                rangeDrag: !0,
                min: 0,
                max: 3e3,
                step: 10,
                values: [a, n],
                change: function () {},
                slide: function (e, t) {
                    return 10 * (t.values[1] - t.values[0]) < i. in .during + i.out.during ? !1 : (i. in .at = 10 * t.values[0], i.out.at = 10 * t.values[1] - parseInt(i. in .at + i. in .during + i.out.during), loadItemInputs(i), void 0)
                }
            })
        })
    }

    function activateTimeline(e) {
        var t = e.parent().data("item"),
            i = t.data("itemData");
        getCurrentSlideChilds().removeClass("hilight"), t.addClass("hilight"), gToeItem.find(".timeline-wrapper.active").removeClass("active"), e.addClass("active"), gToeDataIn.binder(i["in"], !1, listElements), gToeDataOut.binder(i.out, !1, listElements), loadItemInputs(i)
    }

    function loadItemInputs(e) {
        gToeDataInputs.each(function () {
            var t = this,
                i = this.id.split("-");
            t.value = e[i[0]][i[1]]
        })
    }

    function attachElementActions() {
        gToeItem.on("click", ".action-clone", function (e) {
            e.stopPropagation(), e.preventDefault(), $(".poped").popover("hide").popable("hide");
            var t = $(this).parent().data("item").removeClass("hilight"),
                i = $.extend(!0, {}, t.data("itemData"), {
                    id: getNewItemId()
                }),
                a = ItemCreate[i.type](i);
            Tools.align(a, "tl"), getCurrentSlideChilds().last().after(a), Controller.style(i.style, a), listElements()
        }).on("click", ".action-remove", function (e) {
            e.stopPropagation(), e.preventDefault(), $(this).parent().data("item").popover("destroy").remove(), listElements()
        }).on("click", ".action-visibility", function (e) {
            e.stopPropagation(), e.preventDefault(), $(this).parent().data("item").toggleClass("invisible"), listElements()
        })
    }
    $(window).on("load", restoredata).on("beforeunload", savedata);
    var gItemIdCounter, gSlideCounter, gSlideTabs, gSlideContent, gStuffGridSize, gStuffSnapItem, gStuffSnapGrid, gStuffDragX, gStuffDragY, gModeFlexslider, gModeCarousel, gModeManual, gImageLocation, gToeItem, gToeData, gToeDataIn, gToeDataOut, gToeDataInputs;
    $(document).ready(function () {
        var e = $(document);
        $.fn.lush && ($(".preview").removeClass("hidden").next(".muted").remove(), e.on("mouseenter", ".effect-list > option", function (e) {
            e.preventDefault();
            var t = $(this),
                i = t.parent().offset();
            i.left -= 330, lushDemoPreview(t.val(), i)
        }).on("mouseleave", ".effect-list > option", function () {
            lushDemoPreview("", "", !0)
        })), gItemIdCounter = 0, gSlideCounter = 0, gSlideTabs = $("#slide-tabs"), gSlideContent = $("#slide-content"), gStuffGridSize = $("#grid-size"), gStuffSnapItem = $("#snap-item"), gStuffSnapGrid = $("#snap-grid"), gStuffDragX = $("#drag-x"), gStuffDragY = $("#drag-y"), gModeFlexslider = $("#flexslider-mode"), gModeCarousel = $("#carousel-mode"), gModeManual = $("#manual-mode"), gImageLocation = $("#image-location"), gToeItem = $("#toe > .toe-item"), gToeData = $("#toe > .toe-data"), gToeDataIn = gToeData.children(".toe-data-in"), gToeDataOut = gToeData.children(".toe-data-out"), gToeDataInputs = gToeData.find("input, select"), $('<style id="custom-css"/>').appendTo("html > head");
        var t;
        $(".sortable").sortable({
            items: "li",
            cancel: "li:not(.active)",
            placeholder: "drop-highlight",
            tolerance: "pointer",
            start: function () {
                t = $(this).children()
            },
            update: function (e, i) {
                var a = $(this).children(),
                    n = a.index(i.item),
                    o = t.index(i.item),
                    r = gSlideContent.children();
                r.eq(o).clone(), n > o ? r.eq(n).after(r[o]) : r.eq(n).before(r[o])
            }
        }), $("#do-fw").click(toggleFullwidth), $("#ieport").on("click", function () {
            $("#import-status").text(""), $("#ieport-modal").modal("show")
        }), $("#do-import").on("click", importdata), $("#do-export").on("click", exportdata), $(".no-bubble").on("click", function (e) {
            var t = $(this).find("input");
            t.prop("checked", !t.prop("checked")).trigger("change"), e.preventDefault(), e.stopImmediatePropagation()
        }), gModeFlexslider.on("change", function () {
            gModeCarousel[0].checked = !1, gModeManual[0].checked = !1
        }), gModeCarousel.on("change", function () {
            gModeFlexslider[0].checked = !1
        }), gModeManual.on("change", function () {
            gModeFlexslider[0].checked = !1
        }), gImageLocation.on("change", function () {
            for (var e = $(this).val();
                "/" === e.charAt(e.length - 1);) e = e.substring(0, e.length - 1);
            $(this).val(e)
        }), $(".minimize").click(function () {
            var e = $(this).find("em");
            $(".bar").toggleClass("no-label"), e.hasClass("icon-angle-up") ? e.removeClass("icon-angle-up").addClass("icon-angle-down") : e.removeClass("icon-angle-down").addClass("icon-angle-up")
        }), $(".text-classes").each(function () {
            loadOptions(this, classList("lush-items-css", /focus|hover|button|block/))
        }), $(".link-classes").each(function () {
            loadOptions(this, classList("lush-items-css", /focus|hover/, /button/))
        }), $(".block-classes").each(function () {
            loadOptions(this, classList("lush-items-css", /focus|hover/, /block/))
        }), $(".effect-list").each(function () {
            loadOptions(this, effectList)
        }), $(".easing-list").each(function () {
            loadOptions(this, easingList)
        }), e.on("click", "#slide-tabs > li > a", function (e) {
            e.preventDefault(), $(this).tab("show"), listElements()
        }), setSliderSize(), $("#slider-width").change(setSliderSize), $("#slider-height").change(setSliderSize), $("#add-slide").click(function () {
            addSlide()
        }), $("#remove-slide").click(function () {
            var e = getCurrentSlide(),
                t = e.parent(),
                i = t[0].id;
            1 == gSlideTabs.find("li").length ? e.find("*").remove() : (gSlideTabs.find('[href="#' + i + '"]').parent().remove(), t.remove(), gSlideTabs.find("li:first > a").tab("show")), listElements()
        }), $("#snap-grid, #snap-item, #grid-size, #show-grid, #drag-x, #drag-y").on("change", function () {
            addInteraction.call($(".ui-draggable"))
        }), $("#generate").click(function () {
            $("#generated-markup").text(generateMarkup($("#base64-image").is(":checked"))), $("#generated-js").text(generateJS()), window.prettyPrint && prettyPrint(), $("#modal").modal("show")
        }), $("#format-markup").click(function () {
            var e = $("#generated-markup");
            e.text(style_html(e.text())), window.prettyPrint && prettyPrint()
        }), $(".preview").click(function () {
            var e = getAllSlides(),
                t = (e.eq(0), $("#prev-container").html(generateMarkup(!0))),
                i = $("#prev-modal");
            if (isFlexsliderMode()) {
                if (e.length < 2) return alert("Flexslider mode needs at least 2 slide to work."), !1;
                var a;
                if (e.each(function () {
                    return a = !1, $(this).find(".lush-element").each(function () {
                        return a = $(this).data("itemData").ignore, a ? !1 : void 0
                    }), a ? void 0 : !1
                }), !a) return alert("Flexslider mode needs an image as background."), !1
            }
            i.css({
                width: sliderSize.width + 50,
                marginLeft: -((sliderSize.width + 50) / 2)
            }), i.one("shown", function () {
                isFlexsliderMode() ? $(".flexslider").lush({
                    flexslider: {
                        easing: flexSlider.easing,
                        slideshow: !1,
                        keyboard: !1,
                        useCSS: !1,
                        pauseOnHover: flexSlider.pauseonhover,
                        direction: flexSlider.direction,
                        animation: flexSlider.animation,
                        animationSpeed: parseInt(flexSlider.speed)
                    }
                }) : $(".lush-slider").lush({
                    baseWidth: sliderSize.width,
                    baseHeight: sliderSize.height,
                    manual: isManualMode(),
                    slider: {
                        pauseOnHover: !0,
                        carousel: isCarouselMode()
                    }
                })
            }).one("hidden", function () {
                t.children().remove()
            }).modal("show")
        }), $("a[data-toggle=popover], .popable").popable({
            handlerSelector: ".element",
            handlerTarget: function () {
                var e = $(this).find(".idx").text();
                return getCurrentSlideChilds().eq(e)
            },
            afterShow: function (e) {
                var t = $(this),
                    i = getEditingElement().data("itemData") || getCurrentSlide().data("slideData"),
                    a = t.next(".popover");
                if ("#pover-bgimage" == e) return a.binder(sliderBackground, Controller, listElements), void 0;
                if ("#pover-flexslider" == e) return a.binder(flexSlider, Controller, listElements), void 0;
                if ("#pover-slide" == e) return a.binder(i, Controller, listElements), $(".sortable").sortable("option", "disabled", !0), void 0;
                "#animation-in" == e || "#animation-out" == e ? a.binder(i[e.split("-")[1]], !1, listElements) : a.binder(i, Controller, listElements), a.parents(".popover").find("input, select").prop("disabled", !0), a.find("input, select").prop("disabled", !1);
                var n = a.find(".ui-slider");
                n.length && n.slider({
                    value: getEditingElement().data("itemData").opacity,
                    min: 0,
                    max: 1,
                    step: .1,
                    change: function (e, t) {
                        getEditingElement().data("itemData").opacity = t.value, Controller.opacity(t.value)
                    }
                })
            },
            beforeHide: function () {
                var e = $(this).next(".popover"),
                    t = getEditingElement().data("itemData") || getCurrentSlide().data("slideData");
                e.parents(".popover").find("input,select").prop("disabled", !1).binder(t, Controller, listElements)
            },
            afterHide: function (e) {
                "#pover-slide" == e && $(".sortable").sortable("option", "disabled", !1)
            }
        }), e.on("change", ".fileup", function (e) {
            var t = getCurrentSlideChilds().filter(".lush-element.poped"),
                i = setInterval(function () {
                    var a, n, o = $(".fileupload-preview > img");
                    if (o.length) {
                        if (clearInterval(i), a = o.attr("alt"), n = o.attr("src"), "bg-image" == e.target.id) setSliderBackground(a, n);
                        else {
                            var r = t.data("itemData");
                            r.src = a, r.src64 = n, t.css({
                                width: o[0].naturalWidth,
                                height: o[0].naturalHeight
                            }).children("img").attr("src", n)
                        }
                        o.remove()
                    }
                }, 50)
        }), e.on("click", ".remove-item-quick", function (e) {
            e.stopPropagation(), getEditingElement().popover("destroy").remove(), listElements()
        }).on("click", "#remove-bg", function () {
            setSliderBackground(!1)
        }).on("click", ".clone-slide", function (e) {
            e.stopPropagation(), e.preventDefault(), cloneSlide()
        }), $("#add-image, #add-text, #add-link, #add-imglink, #add-block, #add-video").click(function () {
            var e = this.id.split("-")[1];
            ItemCreate[e](newItem(e)), listElements()
        }), e.on("click", "[id*=tool-]", function () {
            var e = this.id.split("-");
            Tools[e[1]](getEditingElement(), e[2])
        }), e.on("mouseenter mouseleave", ".toe-item-timeline", function (e) {
            $(this).data("item")["mouseenter" == e.type ? "addClass" : "removeClass"]("hilight")
        }), attachElementActions(), setInterval(savedata, 6e4), $(window).load(function () {
            0 == getAllSlides().length && addSlide()
        })
    }), ItemCreate = {
        init: function (e, t) {
            return e.appendTo(getCurrentSlide()).data("itemData", t), addInteraction.call(e), e
        },
        image: function (e) {
            var t;
            return t = $("<div/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + ";",
                "class": "lush-element lush-element-wrapper popable",
                "data-id": "#pover-image",
                "data-original-title": "Image Element"
            }).append('<img src="' + e.src64 + '" alt="' + e.id + '">'), this.init(t, e)
        },
        text: function (e) {
            var t;
            return e.src = e.src64 = "", t = $("<div/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + ";",
                "class": "lush-element popable " + e.clase,
                "data-id": "#pover-text",
                "data-original-title": "Text Element"
            }).text(e.content), this.init(t, e)
        },
        link: function (e) {
            var t;
            return e.src = e.src64 = "", t = $("<a/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + ";",
                "class": "lush-element popable " + e.clase,
                "data-id": "#pover-link",
                "data-original-title": "Anchor Element"
            }).text(e.content), this.init(t, e)
        },
        imglink: function (e) {
            var t;
            return t = $("<div/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + ";",
                "class": "lush-element lush-element-wrapper popable",
                "data-id": "#pover-imglink",
                "data-original-title": "Image Link Element"
            }).append('<img src="' + e.src64 + '" alt="' + e.id + '">'), this.init(t, e)
        },
        block: function (e) {
            var t;
            return e.src = e.src64 = "", e.width = "auto" == e.width ? "60px" : e.width, e.height = "auto" == e.height ? "60px" : e.height, e.clase = "" == e.clase ? "block-orange" : e.clase, t = $("<div/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + "; opacity:" + e.opacity,
                "class": "lush-element popable " + e.clase,
                "data-id": "#pover-block",
                "data-original-title": "Text Element"
            }).data("currentClass", e.clase), this.init(t, e)
        },
        video: function (e) {
            var t;
            return e.width = "auto" == e.width ? "170" : e.width, e.height = "auto" == e.height ? "96" : e.height, t = $("<div/>", {
                style: "top: " + e.top + "; left: " + e.left + "; width:" + e.width + "; height: " + e.height + ";",
                "class": "lush-element lush-element-wrapper popable",
                "data-id": "#pover-video",
                "data-original-title": "Video Element"
            }).append('<img src="' + e.videosrc + '" alt="' + e.id + '">'), this.init(t, e)
        }
    };
    var sliderSize = {
        width: 1140,
        height: 450
    }, sliderBackground = {
            src: "",
            src64: "",
            repeat: "no-repeat",
            skin: "",
            shadow: "",
            position: "0 0",
            size: "100% auto"
        }, flexSlider = {
            animation: "slide",
            direction: "left",
            speed: 600,
            easing: "easeInOutExpo",
            pauseonhover: !1
        }, Tools = {
            resize: function (e, t) {
                var i = getCurrentSlide().width(),
                    a = getCurrentSlide().height();
                if (("h" == t || "f" == t) && e.width(i), ("v" == t || "f" == t) && e.height(a), "r" == t) {
                    var n = "block" == e.data("itemData").type;
                    e.css({
                        width: n ? 60 : "auto",
                        height: n ? 60 : "auto"
                    })
                }
                this.update({
                    width: e.css("width"),
                    height: e.css("height")
                })
            },
            align: function (e, t) {
                var i = getCurrentSlide().width(),
                    a = getCurrentSlide().height(),
                    n = {};
                switch (t) {
                case "tt":
                    n.top = 0, n.bottom = "auto";
                    break;
                case "bb":
                    n.bottom = "auto", n.top = a - e.outerHeight(!0) + "px";
                    break;
                case "ll":
                    n.left = 0, n.right = "auto";
                    break;
                case "rr":
                    n.right = "auto", n.left = i - e.outerWidth(!0) + "px";
                    break;
                case "tl":
                    n.top = n.left = 0, n.right = n.bottom = "auto";
                    break;
                case "tr":
                    n.top = 0, n.left = i - e.outerWidth(!0) + "px", n.right = n.bottom = "auto";
                    break;
                case "bl":
                    n.top = a - e.outerHeight(!0) + "px", n.left = 0, n.right = n.bottom = "auto";
                    break;
                case "br":
                    n.top = a - e.outerHeight(!0) + "px", n.left = i - e.outerWidth(!0) + "px", n.bottom = n.right = "auto";
                    break;
                case "cc":
                    n.top = a / 2 - e.outerHeight(!0) / 2 + "px", n.left = i / 2 - e.outerWidth(!0) / 2 + "px", n.right = n.bottom = "auto";
                    break;
                case "vc":
                    n.top = a / 2 - e.outerHeight(!0) / 2 + "px", n.bottom = "auto";
                    break;
                case "hc":
                    n.left = i / 2 - e.outerWidth(!0) / 2 + "px", n.right = "auto"
                }
                e.css(n), this.update(n)
            },
            order: function (e, t) {
                "up" == t ? e.before(e.next().is(".popover") ? e.next().next() : e.next()) : e.after(e.prev()), listElements()
            },
            update: function (e) {
                $.extend(getEditingElement().data("itemData"), e)
            }
        }, Controller = {
            content: function (e) {
                var t = getEditingElement(),
                    i = t.data("itemData");
                t.html(e), i.width = t.css("width"), i.height = t.css("height"), doResizable(t)
            },
            clase: function (e) {
                var t = getEditingElement(),
                    i = getEditingElement().data("itemData");
                t.data("currentClass") && t.removeClass(t.data("currentClass")), t.addClass(e).data("currentClass", e), i.width = t.css("width"), i.height = t.css("height")
            },
            style: function (e, t) {
                var i = t || getEditingElement(),
                    a = "custom-" + i.data("itemData").id;
                csslink = $("#" + a), isEmpty(e) || (csslink.length || (csslink = $('<style type="text/css" rel="stylesheet" id="' + a + '" />').appendTo("head")), csslink.text("." + a + "{" + e + "}"), i.addClass(a))
            },
            width: function (e) {
                var t = getEditingElement(),
                    i = isEmpty(e) ? t.width() : parseInt(e) > 0 ? e : "auto";
                t.css({
                    width: i
                }).data("itemData").width = i
            },
            height: function (e) {
                var t = getEditingElement(),
                    i = isEmpty(e) ? t.height() : parseInt(e) > 0 ? e : "auto";
                t.css({
                    height: i
                }).data("itemData").height = i
            },
            target: function (e) {
                getEditingElement().attr("target", e)
            },
            href: function (e) {
                getEditingElement().attr("href", e)
            },
            opacity: function (e) {
                getEditingElement().css("opacity", e)
            },
            clip: function (e, t) {
                var i = t ? $(t) : getEditingElement(),
                    a = i.position(),
                    n = "rect(";
                e ? (n += (a.top < 0 ? -a.top : "0") + "px, ", n += (a.left < 0 ? sliderSize.width + -a.left : sliderSize.width - a.left) + "px, ", n += (a.top < 0 ? sliderSize.height + -a.top : sliderSize.height - a.top) + "px, ", n += (a.left < 0 ? -a.left : "0") + "px)") : n = "", i.css("clip", n)
            },
            videoid: function (e) {
                var t = getEditingElement(),
                    i = t.data("itemData");
                i.videosrc = getVideoPreview(e, i.videotype, function (e, a) {
                    t.children("img").attr("src", a), i.videoid = e, i.videosrc = a
                })
            },
            position: setSliderBackground,
            repeat: setSliderBackground,
            size: setSliderBackground,
            skin: setSliderBackground,
            shadow: setSliderBackground
        }, Generator = {
            image: function (e, t, i) {
                var a = "",
                    n = gImageLocation.val();
                return a += '<img src="' + (i ? t.src64 : "" === n ? t.src : n + "/" + t.src) + '" ', t.ignore ? (a += 'class="ignore' + (i ? " custom-" + t.id : "") + '" ', a += 'style="width: ' + t.width + "; height: " + t.height + '" ') : (a += i ? 'class="custom-' + t.id + '" ' : "", (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'style="top: ' + t.top + "; left: " + t.left + "; width: " + (isNaN(t.width) ? t.width : t.width + "px") + "; height: " + (isNaN(t.height) ? t.height : t.height + "px") + ";" + (i ? "" : t.style) + '" '), a += 'alt="" />'
            },
            text: function (e, t, i) {
                var a = "";
                return a += '<div class="' + t.clase + (i ? " custom-" + t.id : "") + '" ', (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'style="top: ' + t.top + "; left: " + t.left + "; width: " + (isNaN(t.width) ? t.width : t.width + "px") + "; height: " + (isNaN(t.height) ? t.height : t.height + "px") + ";" + (i ? "" : t.style) + '" ', a += ">" + t.content + "</div>"
            },
            link: function (e, t, i) {
                var a = "";
                return a += '<a class="' + t.clase + (i ? " custom-" + t.id : "") + '" ', a += 'href="' + t.href + '" ', a += 'target="' + t.target + '" ', (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'style="top: ' + t.top + "; left: " + t.left + "; width: " + (isNaN(t.width) ? t.width : t.width + "px") + "; height: " + (isNaN(t.height) ? t.height : t.height + "px") + ";" + (i ? "" : t.style) + '" ', a += ">", a += t.content + "</a>"
            },
            imglink: function (e, t, i) {
                var a = "";
                return a += '<a class="' + t.clase + (i ? " custom-" + t.id : "") + '" ', a += 'href="' + t.href + '" ', a += 'target="' + t.target + '" ', (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'style="top: ' + t.top + "; left: " + t.left + "; width: " + (isNaN(t.width) ? t.width : t.width + "px") + "; height: " + (isNaN(t.height) ? t.height : t.height + "px") + ";" + (i ? "" : t.style) + '" ', a += ">", a += '<img src="' + (i ? t.src64 : t.src) + '" alt="" />', a += "</a>"
            },
            block: function (e, t, i) {
                var a = "";
                return a += '<div class="' + t.clase + (i ? " custom-" + t.id : "") + '" ', (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'style="top: ' + t.top + "; left: " + t.left + "; width: " + (isNaN(t.width) ? t.width : t.width + "px") + "; height: " + (isNaN(t.height) ? t.height : t.height + "px") + "; opacity: " + t.opacity + ";" + (i ? "" : t.style) + '" ', a += "></div>"
            },
            video: function (e, t) {
                var i = {
                    vimeo: "http://player.vimeo.com/video/",
                    youtube: "http://www.youtube.com/embed/"
                }, a = "";
                return gImageLocation.val(), "" == t.videoid ? "" : (a += '<iframe src="' + i[t.videotype] + t.videoid + '" ', (!e || t. in .override) && (a += 'data-slide-in="at ' + t. in .at + " from " + t. in .from + " use " + t. in .use + " during " + t. in .during + '" '), (!e || t.out.override) && (a += 'data-slide-out="at ' + t.out.at + " to " + t.out.to + " use " + t.out.use + " during " + t.out.during + (t.out.force ? " force" : "") + '" '), a += 'width="' + t.width.replace("px", "") + '" ' + 'height="' + t.height.replace("px", "") + '"', a += ' style="top: ' + t.top + "; left: " + t.left + '" ', a += ' frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen', a += "></iframe>")
            }
        };
    $.fn.duplicate = function () {
        return this.map(function () {
            var e = $(this),
                t = e.data();
            return e.clone().data($.extend(!0, {}, t))[0]
        })
    }, $.fn.cloneData = function (e, t, i) {
        return this.each(function () {
            var a;
            t && (a = $(this).data(e), newData = "object" == typeof a ? i ? $.extend(!0, {}, a) : $.extend({}, a) : a, $(t).data(e, newData))
        })
    }, $.fn.insertAt = function (e, t) {
        var i = t.children("*").length;
        return this.each(function () {
            0 === e ? t.prepend(this) : e === i - 1 ? t.append(this) : t.children().eq(e - 1).after(this)
        })
    }, $.fn.popable = function (e) {
        function t(e) {
            var t = $(this);
            t.data("state", e && "hide" != e ? "hide" : "show"), t[e && "hide" != e ? "removeClass" : "addClass"]("poped")
        }

        function i(e) {
            e && (e.stopPropagation(), e.preventDefault());
            var i = $(this),
                a = i.data("id"),
                n = i.data("state");
            i.childOf(".popover") || $(".poped").popover("hide").popable("hide"), i.siblings(".poped").popover("hide").popable("hide"), t.call(this, n), n = i.data("state"), "show" == n ? o.beforeShow.call(this, a) : o.beforeHide.call(this, a), i.popover({
                html: !0,
                trigger: "manual",
                content: function () {
                    return $(a).html()
                }
            }).popover(n), (!i.data("placement") || "left" == i.data("placement")) && i.offset().left + i.width() + i.next().width() / 4 > window.innerWidth && i.next().css({
                left: i.parent().width(),
                top: i.parent().height() / 4
            }), $("html, body").stop().animate({
                scrollLeft: i.next() && i.next().offset() ? i.next().offset().left : 0
            }, 500), "show" == n ? o.afterShow.call(this, a) : o.afterHide.call(this, a)
        }

        function a(t) {
            var a;
            t && t.stopPropagation(), a = $(this).data("pop"), a || "function" != typeof e.handlerTarget || (a = e.handlerTarget.call(this)), a && i.call(a)
        }
        if (this.length) {
            var n = $("body").data("popableOption"),
                o = n || $.extend({}, {
                    keyboard: !0,
                    anyclick: !0,
                    handlerSelector: !1,
                    handlerTarget: !1,
                    beforeShow: function () {},
                    afterShow: function () {},
                    beforeHide: function () {},
                    afterHide: function () {}
                }, e),
                r = $(document);
            if (n || $("body").data("popableOption", o), "object" == typeof e) {
                if ($.data(this, "popable")) return this;
                $.data(this, "popable", "Iniciado")
            }
            if ("string" == typeof e) return "toggle" == e ? i.call(this[0]) : t.call(this[0], "hide" == e ? "show" : "hide"), this;
            o.anyclick && r.on("click", $.proxy(function (e) {
                var t = $(e.target);
                t.is(this.selector) || t.parents(".popover").length || $(".poped").popable("toggle")
            }, this)), r.on("click", this.selector, i), e.handlerSelector && r.on("click", e.handlerSelector, a), o.keyboard && r.keyup(function (e) {
                27 == e.keyCode && $(".poped").popable("toggle")
            })
        }
    }, $.fn.childOf = function (e) {
        if ((typeof e).match("array|object")) {
            for (p in e)
                if (!this.childOf(e[p])) return !1;
            return !0
        }
        return this.parents(e).length
    };
    var easingList = ["linear", "swing", "jswing", "easeInQuad", "easeOutQuad", "easeInOutQuad", "easeInCubic", "easeOutCubic", "easeInOutCubic", "easeInQuart", "easeOutQuart", "easeInOutQuart", "easeInQuint", "easeOutQuint", "easeInOutQuint", "easeInSine", "easeOutSine", "easeInOutSine", "easeInExpo", "easeOutExpo", "easeInOutExpo", "easeInCirc", "easeOutCirc", "easeInOutCirc", "easeInElastic", "easeOutElastic", "easeInOutElastic", "easeInBack", "easeOutBack", "easeInOutBack", "easeInBounce", "easeOutBounce", "easeInOutBounce"],
        effectList = ["left", "right", "top", "bottom", "left-bottom", "right-bottom", "right-top", "left-top", "fade", "left-fade", "right-fade", "top-fade", "bottom-fade", "front", "back", "left-top-rotate", "right-top-rotate", "left-bottom-rotate", "right-bottom-rotate", "front-rotate", "back-rotate", "front-rotate2", "back-rotate2", "back-left", "back-right", "back-bottom", "back-top", "front-left", "back-right", "front-bottom", "front-top", "flip", "flip-h", "roll-top", "roll-bottom", "roll-left", "roll-right", "bounce", "bounce-left", "bounce-right", "bounce-top", "bounce-bottom", "rotate", "left-down-rotate", "right-down-rotate", "left-up-rotate", "right-up-rotate", "left-speed", "right-speed", "hinge"];

    $("#skin-class").change(function(){
       setSliderBackground();
    })

    $("#shadow-class").change(function(){
       setSliderBackground();
    })

    $("#form .save-slider").click(function(){
        var slider_json = saveslider();
        $("#slider_json_data").val(slider_json);
        $("#form").submit();
    })



    $("#form .save-stay-slider").click(function(){
        var slider_json = saveslider();
        $("#slider_json_data").val(slider_json);
        $("#action").val("save_stay");
        $("#form").submit();
    })

});
